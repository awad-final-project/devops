# Backend Environment Configuration
# Managed by Ansible

# MongoDB Configuration
{% if use_local_mongodb | bool %}
MONGO_URI=mongodb://{{ mongo_root_user }}:{{ mongo_root_password }}@mongo:27017
{% else %}
MONGO_URI={{ mongo_uri }}
{% endif %}
MONGO_DB={{ mongo_db | default('user_registration') }}

# JWT Configuration
JWT_SECRET={{ jwt_secret }}
JWT_EXPIRES_IN={{ jwt_expires_in | default('7d') }}
JWT_REFRESH_SECRET={{ jwt_refresh_secret | default(jwt_secret) }}
JWT_REFRESH_EXPIRES_IN={{ jwt_refresh_expires_in | default('30d') }}

# CORS & Frontend
# Always use HTTPS as we have enabled SSL for both dev and preview
{% set final_domain = full_domain_name | default(domain_name) %}
CORS_ORIGIN=https://{{ final_domain }}
FRONTEND_URL=https://{{ final_domain }}
GOOGLE_CALLBACK_URL=https://{{ final_domain }}/api/auth/google/callback

# Google OAuth (Optional)
GOOGLE_CLIENT_ID={{ google_client_id | default('') }}
GOOGLE_CLIENT_SECRET={{ google_client_secret | default('') }}

# Email Configuration (Optional)
SMTP_HOST={{ smtp_host | default('') }}
SMTP_PORT={{ smtp_port | default('587') }}
SMTP_USER={{ smtp_user | default('') }}
SMTP_PASS={{ smtp_pass | default('') }}

# Application
PORT=3000
NODE_ENV={{ env_type }}
USE_COOKIE_AUTH=true
